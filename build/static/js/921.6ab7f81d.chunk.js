"use strict";(self.webpackChunkafinity_landing_page=self.webpackChunkafinity_landing_page||[]).push([[921],{3921:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var i=n(5043),a=n(1043),l=n.n(a),r=n(6938),s=n(7067),o=n(579);const c=[{id:1,title:"Afinity uses data and artificial intelligence to transform the quality of    interpersonal interactions",url:"/videos/hyy.webm",buttonId:"what-we-do"},{id:2,title:"How We Do It",url:"/videos/loll.webm",buttonId:"how-we-do-it"},{id:3,title:"What We Deliver",url:"/videos/jiu.webm",buttonId:"what-we-deliver"}],d=()=>{const[e,t]=(0,i.useState)(0),[n,a]=(0,i.useState)(!0),[d,u]=(0,i.useState)(1),[m,x]=(0,i.useState)(0),[f,h]=(0,i.useState)(!1),[p,b]=(0,i.useState)({x:0,y:0}),[w,v]=(0,i.useState)(!1),[g,y]=(0,i.useState)(new Set),j=(0,i.useRef)(null),E=(0,i.useRef)(null),k=(0,i.useRef)(new Map),I=(0,i.useRef)(null),N=(0,i.useRef)(null),C=(0,i.useMemo)((()=>({hidden:{opacity:0},visible:{opacity:1,transition:{duration:1}},exit:{opacity:0,transition:{duration:.5}}})),[]),M=(0,i.useMemo)((()=>({hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:20}},exit:{opacity:0,y:-20,transition:{duration:.2}}})),[]);(0,i.useMemo)((()=>({default:{x:p.x-16,y:p.y-16,scale:1},hover:{x:p.x-16,y:p.y-16,scale:1.5,backgroundColor:"rgba(255, 255, 255, 0.4)",mixBlendMode:"difference"}})),[p.x,p.y]);(0,i.useEffect)((()=>{const e=(async()=>{const e=c[0];if(!k.current.has(e.id)){const t=document.createElement("video");t.src=e.url,t.preload="metadata",t.muted=!0,t.playsInline=!0,k.current.set(e.id,t),await new Promise((n=>{const i=()=>{y((t=>new Set([...t,e.id]))),t.removeEventListener("canplay",i),n()},a=()=>{console.warn("Failed to preload video: ".concat(e.url)),t.removeEventListener("error",a),n()};t.addEventListener("canplay",i),t.addEventListener("error",a)}))}return e=>{(e=>{if(e<c.length){const t=c[e];if(!k.current.has(t.id)){const e=document.createElement("video");e.src=t.url,e.preload="metadata",e.muted=!0,e.playsInline=!0,k.current.set(t.id,e)}}})(e+1)}})();return()=>{"function"===typeof e&&e(),k.current.forEach((e=>{e.src="",e.load()})),k.current.clear()}}),[]);const L=(0,i.useCallback)((()=>{N.current&&clearTimeout(N.current),N.current=setTimeout((()=>{h(window.innerWidth<768)}),100)}),[]);(0,i.useEffect)((()=>(h(window.innerWidth<768),window.addEventListener("resize",L),()=>{window.removeEventListener("resize",L),N.current&&clearTimeout(N.current)})),[L]);const S=(0,i.useCallback)((e=>{b({x:e.clientX,y:e.clientY})}),[]);(0,i.useEffect)((()=>{if(f)return;let e;const t=t=>{e||(e=requestAnimationFrame((()=>{S(t),e=null})))};return window.addEventListener("mousemove",t,{passive:!0}),()=>{window.removeEventListener("mousemove",t),e&&cancelAnimationFrame(e)}}),[f,S]);const z=(0,i.useCallback)((()=>{E.current&&clearInterval(E.current),E.current=setInterval((()=>{t((e=>{const t=(e+1)%c.length;return u((t+1)%c.length),t}))}),11e3)}),[]);(0,i.useEffect)((()=>(z(),()=>{E.current&&clearInterval(E.current)})),[z]),(0,i.useEffect)((()=>(I.current&&clearTimeout(I.current),a(!1),I.current=setTimeout((()=>{d<c.length&&a(!0)}),3e3),()=>{I.current&&clearTimeout(I.current)})),[e,d]);const F=(0,i.useCallback)((function(n){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n!==e&&(a(!1),t(n),u((n+1)%c.length),i&&(x((e=>e+1)),z()))}),[e,z]),T=(0,i.useCallback)((e=>{f||v(e)}),[f]),P=(0,i.useMemo)((()=>c[e]),[e]),R=(0,i.useMemo)((()=>c[d]),[d]);return(0,o.jsxs)("div",{className:"relative w-full h-screen overflow-hidden",children:[(0,o.jsx)(r.N,{mode:"wait",children:(0,o.jsxs)(s.P.div,{className:"absolute inset-0 w-full h-full pointer-events-none",variants:C,initial:"hidden",animate:"visible",exit:"exit",children:[(0,o.jsx)(l(),{ref:j,url:P.url,playing:!0,loop:!0,muted:!0,width:"100%",height:"100%",playsinline:!0,style:{objectFit:"cover",position:"absolute",top:0,left:0,pointerEvents:"none"},config:{file:{attributes:{preload:"metadata",style:{width:"100%",height:"100%",objectFit:"cover"}}}}}),(0,o.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-black/40 via-black/20 to-black/70"})]},"video-".concat(e))}),!f&&(0,o.jsx)("div",{className:"absolute top-8 right-[calc(2rem--250px)] z-[5000] flex flex-row gap-8 pointer-events-auto",children:c.map(((t,n)=>(0,o.jsx)("div",{className:"flex flex-col group",children:(0,o.jsx)("button",{id:t.buttonId,className:"text-white uppercase text-lm font-medium tracking-wider  ".concat(e===n?"opacity-100":"opacity-40 hover:opacity-100"," transition-opacity duration-300 text-left"),onClick:()=>F(n,!0),onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),children:t.buttonId.replace(/-/g," ")})},t.id)))}),f&&(0,o.jsx)("div",{className:"absolute bottom-20 right-8 z-20 flex flex-row gap-4",children:c.map(((t,n)=>(0,o.jsx)("button",{id:t.buttonId,className:"w-3 h-3 rounded-full ".concat(e===n?"bg-green-600":"bg-white/50"," transition-all duration-300"),onClick:()=>F(n,!0),"aria-label":"Video ".concat(n+1)},t.id)))}),(0,o.jsxs)("div",{className:"absolute inset-0 flex flex-col justify-center text-left z-10 px-4 sm:px-6 md:px-8 lg:ml-40 lg:px-4",children:[(0,o.jsx)(s.P.h1,{className:"text-2xl xs:text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-bold text-white mb-3 sm:mb-4 md:mb-6 max-w-full sm:max-w-2xl md:max-w-3xl lg:max-w-4xl xl:max-w-5xl leading-tight sm:leading-tight md:leading-tight",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:P.title},"title-".concat(e)),(0,o.jsx)(s.P.p,{className:"text-sm xs:text-base sm:text-lg md:text-xl lg:text-2xl text-white/80 max-w-full sm:max-w-md md:max-w-lg lg:max-w-xl leading-relaxed sm:leading-relaxed",animate:{opacity:1},transition:{delay:.1,duration:.1},children:"Find out how we help businesses pair better."},"desc-".concat(e))]}),(0,o.jsx)(r.N,{children:n&&d!==e&&(0,o.jsxs)(s.P.button,{variants:M,initial:"hidden",animate:"visible",exit:"exit",className:"absolute ".concat(f?"bottom-8 left-4 right-4 w-auto":"bottom-10 left-1/2 transform -translate-x-1/2"," bg-green-600/30 backdrop-blur-sm text-white px-4 py-2 sm:px-6 sm:py-2 rounded-full border border-white/30 hover:bg-white/30 transition-all z-30 cursor-pointer text-sm sm:text-base"),onClick:()=>F(d,!0),onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),style:{zIndex:40},children:["Discover ",R.buttonId.replace(/-/g," ")," \u2192"]})})]})}}}]);
//# sourceMappingURL=921.6ab7f81d.chunk.js.map